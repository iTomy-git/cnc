<!doctype html>
<html lang="sl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>CNC kalkulator ‚Äî Stro≈°ki & ƒåas (v5)</title>
<style>
  body{font-family:system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial;max-width:900px;margin:0 auto;padding:16px;background:#f5f6fa;color:#111;font-size:18px}
  header{display:flex;align-items:center;justify-content:space-between;gap:10px;margin-bottom:16px;flex-wrap:wrap}
  h1{font-size:22px;margin:0;text-align:center;flex:1}
  .version{font-size:15px;color:#666;margin-left:6px}
  .refresh-btn{background:#f04343;color:white;border:none;padding:10px 14px;border-radius:8px;font-weight:700;cursor:pointer;font-size:16px}
  .update-banner{display:none;background:#ffe08a;color:#222;padding:10px;border-radius:8px;text-align:center;margin-bottom:10px;font-weight:600}
  .card{background:#fff;border:1px solid #dce1e8;border-radius:10px;padding:16px;margin-bottom:16px;box-shadow:0 2px 6px rgba(0,0,0,0.05)}
  label{display:block;font-weight:600;margin-top:10px;font-size:17px}
  .row{display:flex;gap:10px;flex-wrap:wrap;align-items:center}
  input[type="number"], input[type="text"], select{padding:12px;border:1px solid #cfd6e3;border-radius:8px;min-width:100px;font-size:18px}
  button{background:#2b7be4;color:white;border:none;padding:12px 16px;border-radius:10px;font-weight:700;cursor:pointer;margin-top:12px;font-size:18px}
  button.secondary{background:#6c757d}
  .ops{margin-top:10px}
  .op{border:1px dashed #cbd6e6;padding:10px;border-radius:8px;margin-bottom:10px;display:grid;grid-template-columns:1fr auto;gap:10px;align-items:start}
  .op-fields{display:flex;flex-wrap:wrap;gap:10px}
  .result{font-size:18px;font-weight:700;margin-top:10px}
  .muted{color:#666;font-weight:600;font-size:16px}
  .toolbar{display:flex;gap:10px;flex-wrap:wrap;margin-top:10px}
  .save-load{display:flex;gap:8px;margin-top:8px;flex-wrap:wrap}
  footer{font-size:14px;color:#666;margin-top:16px;text-align:center}
  @media (max-width:520px){
    body{font-size:19px;padding:14px}
    input,select,button{font-size:19px;width:100%}
    .op{grid-template-columns:1fr}
    .row{flex-direction:column;align-items:stretch}
  }
</style>
</head>
<body>
<header>
  <h1>CNC kalkulator <span class="version">(v5)</span></h1>
  <button class="refresh-btn" id="refreshAll">üîÑ Osve≈æi & poƒçisti</button>
</header>

<div id="updateBanner" class="update-banner">
  Na voljo je nova razliƒçica ‚Äî <button id="updateNow">Posodobi zdaj</button>
</div>

<script>
const CURRENT_VERSION = 'v5';
async function checkVersion(){
  try {
    const response = await fetch('https://itomy-git.github.io/cnc/index.html?nocache=' + Date.now());
    const text = await response.text();
    if(!text.includes('v5')){
      if(confirm('Na voljo je nova razliƒçica ‚Äî posodobim zdaj?')){
        location.reload(true);
      } else {
        document.getElementById('updateBanner').style.display='block';
      }
    }
  } catch(e){
    console.log('Verzije ni bilo mogoƒçe preveriti:', e);
  }
}
checkVersion();

document.getElementById('updateNow').addEventListener('click',()=>location.reload(true));
document.getElementById('refreshAll').addEventListener('click',()=>{
  if(confirm('Ali res ≈æeli≈° poƒçistiti vse podatke in osve≈æiti stran?')){
    localStorage.clear();
    location.reload(true);
  }
});
</script>

<p>Ta razliƒçica vkljuƒçuje preverjanje verzije in popravljen localStorage.</p>

</body>
</html>